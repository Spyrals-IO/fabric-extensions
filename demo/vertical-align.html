<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/4.2.0/fabric.min.js"></script>
    <script src="./../dist/fabric-extensions.umd.js"></script>
  </head>
  <body>
    <canvas width="500" height="500" tabindex="1"></canvas>
    <pre></pre>
    <script>
      const instance = new fabric.Canvas(document.querySelector('canvas'), {
        enableRetinaScaling: true,
        selection: false,
        includeDefaultValues: false
      })
      let textEditing = false

      instance.on({
        'text:editing:entered': () => (textEditing = true),
        'text:editing:exited': () => (textEditing = false),
      })

      instance.getElement().parentElement.onclick = () => {
        if (!textEditing) {
          instance.getElement().focus()
        }
      }

      const arrow = new fabric.Arrow(new Array(4).fill(null).map(a => ({ x: Math.floor(Math.random() * 500), y: Math.floor(Math.random() * 500) })), {
        fill: 'blue',
        stroke: 'black'
      })

      //  const polygon = new fabric.Polygon(new Array(Math.floor(Math.random() * 3) + 1).fill(null).map(a => ({ x: Math.floor(Math.random() * 500), y: Math.floor(Math.random() * 500) })), {
      //     fill: 'blue'
      //   })

      instance.add(arrow)
    </script>
  </body>
</html>
