<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/4.2.0/fabric.min.js"></script>
    <script src="./../dist/fabric-extensions.umd.js"></script>
  </head>
  <body>
    <canvas width="500" height="500" tabindex="1"></canvas>
    <script>
      const instance = new fabric.Canvas(document.querySelector('canvas'), {
        enableRetinaScaling: true,
      })
      let textEditing = false

      instance.on({
        'text:editing:entered': () => (textEditing = true),
        'text:editing:exited': () => (textEditing = false),
      })

      instance.getElement().parentElement.onclick = () => {
        if (!textEditing) {
          instance.getElement().focus()
        }
      }

      instance.loadFromJSON({ objects: [{ type: 'icon', left: 0, top: 0 }] })
    </script>
  </body>
</html>
